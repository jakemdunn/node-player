app.directive("library",["$compile","$templateCache","LIBRARY_VIEW",function(e,t,n){return{restrict:"A",scope:{library:"=",layout:"="},templateUrl:"views/partials/library.html",link:function(r,i){r.filtered=[],r.selectedIndex=!1,r.expandedIndex=!1,r.expandAlbum=function(e,t){var n=[],i=e.id.replace(/[^\/]*$/,""),a=$(t.target).parents(".album").index();return r.selectedIndex===a?(r.selectedIndex=!1,r.expandedIndex=!1,void(r.expanded=!1)):(r.selectedIndex=a,angular.forEach(r.library,function(e){if(-1!==e.id.indexOf(i))n.push(e);else if(n.length>0)return!1}),r.expanded=n,void setTimeout(function(){$(window).trigger("resize.library")},0))},r.$watchGroup(["library","layout"],function(){if(r.layout==n.album){r.filtered=[];var a="";angular.forEach(r.library,function(e){var t=e.id.replace(/[^\/]*$/,"");a!==t&&(a=t,r.filtered.push(e))})}else r.filtered=r.library;i.html(t.get(r.layout)),e(i.contents())(r)}),$(window).on("resize.library",function(){if(r.selectedIndex!==!1){var e=$(".album-content"),t=Math.round($(window).width()/e.first().width()),n=0;n=r.selectedIndex+(t-r.selectedIndex%t)-1,n>=e.length&&(n=e.length-1),r.$apply(function(){r.expandedIndex=n})}}),r.$on("$destroy",function(){$(window).off("resize.library")})}}}]),app.constant("LIBRARY_VIEW",{album:"album-view",track:"track-view"}),app.directive("player",["$compile","$templateCache","socket",function(e,t,n){return{restrict:"A",scope:{player:"="},templateUrl:"views/partials/player.html",link:function(){n.on("playerUpdate",function(e){console.log(e)})}}}]);
//# sourceMappingURL=directives.js.map